pre-commit:
  parallel: false
  commands:
    1-pretty:
      glob: '*.{js,ts,jsx,tsx,json,css,scss,sass,yml}'
      run: yarn prettier --write {staged_files} && git add {staged_files}
    2-lint:
      glob: '*.{js,jsx,ts,tsx}'
      run: yarn eslint --cache --fix {staged_files} && git add {staged_files}
    3-tsc:
      run: yarn tsc

pre-push:
  parallel: false
  commands:
    1-tsc:
      run: yarn tsc
    2-test:
      files: git diff --name-only origin/main
      glob: '*.{js,ts,jsx,tsx,json,css,scss,sass,yaml}'
      run: yarn test --findRelatedTests --bail {files}
